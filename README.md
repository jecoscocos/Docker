# Docker Web Application Guide

## Основные команды Docker

### Сборка образа
```bash
docker build -t web-app .
```

### Запуск контейнера
```bash
docker run -p 5000:5000 web
```

- `run` - создает и запускает контейнер
- `-p 5000:5000` - проброс портов (локальный_порт:порт_контейнера)

Дополнительные параметры для `docker run`:
- `-d` - запуск в фоновом режиме
- `-v` - монтирование томов
- `-e` - установка переменных окружения
- `--name` - задать имя контейнеру
- `--rm` - автоматически удалить контейнер после остановки
- `--network` - подключить к сети
- `-i` - интерактивный режим
- `-t` - создать псевдо-TTY

### Управление контейнерами
```bash
docker ps        # список запущенных контейнеров
docker ps -a     # список всех контейнеров
docker stop web  # остановить контейнер
docker start web # запустить остановленный контейнер
docker rm web    # удалить контейнер
```

### Управление образами
```bash
docker images    # список образов
docker rmi web   # удалить образ
docker pull      # загрузить образ из Docker Hub
docker push      # отправить образ в Docker Hub
```

### Логи и отладка
```bash
docker logs web           # просмотр логов контейнера
docker exec -it web bash # подключиться к работающему контейнеру
docker inspect web       # детальная информация о контейнере
```

## Структура проекта
```
project/
├── app.py             # Flask приложение
├── requirements.txt   # Зависимости Python
├── Dockerfile        # Инструкции для сборки образа
└── README.md         # Документация
```

## Dockerfile
Каждая инструкция в Dockerfile:
- `FROM` - базовый образ
- `WORKDIR` - рабочая директория
- `COPY` - копирование файлов
- `RUN` - выполнение команд при сборке
- `EXPOSE` - объявление портов
- `CMD` - команда по умолчанию при запуске

## Примеры использования

### Сборка и запуск в фоновом режиме
```bash
docker build -t web .
docker run -d -p 5000:5000 --name myapp web
```

### Просмотр логов
```bash
docker logs -f myapp  # -f для следования за логами
```

### Остановка и удаление
```bash
docker stop myapp
docker rm myapp
```

### Пересборка без кэша
```bash
docker build --no-cache -t web .
```

## Советы
- Используйте `.dockerignore` для исключения ненужных файлов при сборке
- Применяйте многоступенчатую сборку для оптимизации размера образа
- Регулярно очищайте неиспользуемые образы и контейнеры
